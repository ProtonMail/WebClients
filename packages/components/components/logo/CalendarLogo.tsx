import { ComponentPropsWithoutRef, useState } from 'react';

import { classnames, generateUID } from '@proton/components';
import { getAppName } from '@proton/shared/lib/apps/helper';
import { APPS } from '@proton/shared/lib/constants';

import { LogoProps } from './Logo';

type Props = ComponentPropsWithoutRef<'svg'> & Pick<LogoProps, 'variant' | 'size' | 'hasTitle'>;

const CalendarLogo = ({ variant = 'with-wordmark', size, className, hasTitle = true, ...rest }: Props) => {
    const appName = getAppName(APPS.PROTONCALENDAR);

    // This logo can be several times in the view, ids has to be different each time
    const [uid] = useState(generateUID('logo'));

    const logoWidth = variant === 'with-wordmark' ? 166 : 36;

    return (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlnsXlink="http://www.w3.org/1999/xlink"
            viewBox={`0 0 ${logoWidth} 36`}
            width={logoWidth}
            height="36"
            fill="none"
            className={classnames(['logo', size && `icon-${size}p`, variant, className])}
            aria-labelledby={`${uid}-title`}
            {...rest}
        >
            {variant === 'with-wordmark' && (
                <g>
                    <path
                        className="logo-text-product"
                        d="M98.49 23.86a6 6 0 01-2.27-2.28 6.79 6.79 0 010-6.47 5.98 5.98 0 012.27-2.28 6.35 6.35 0 013.23-.83 6.54 6.54 0 012.68.55 5.26 5.26 0 013.08 3.7h-2.39a3.4 3.4 0 00-1.26-1.47 4.1 4.1 0 00-4.1-.02c-.6.36-1.1.87-1.43 1.49a4.51 4.51 0 000 4.22 3.84 3.84 0 003.42 2 3.76 3.76 0 002.1-.55c.56-.36 1-.87 1.27-1.48h2.39a5.3 5.3 0 01-3.08 3.73 6.54 6.54 0 01-2.68.53 6.37 6.37 0 01-3.23-.84zm16.3-7.49c.67.35 1.23.9 1.6 1.55.4.72.6 1.53.57 2.35v4.22h-2.02l-.15-1.27a2.84 2.84 0 01-1.11 1.09c-.5.26-1.06.39-1.63.38a3.9 3.9 0 01-2.05-.56 3.97 3.97 0 01-1.47-1.57 4.8 4.8 0 01-.54-2.31 4.39 4.39 0 01.59-2.26 4.21 4.21 0 011.61-1.58 4.6 4.6 0 012.3-.57 4.81 4.81 0 012.3.53zm-.74 5.68c.44-.42.66-1.02.66-1.8a2.46 2.46 0 00-.64-1.76 2.07 2.07 0 00-1.58-.67 2.1 2.1 0 00-1.6.68 2.73 2.73 0 000 3.51 2.1 2.1 0 001.6.67 2.18 2.18 0 001.56-.63zm6.69 2.44h-2.28v-12.3h2.28v12.3zm9.76-3.46h-6.41c.1.5.37.97.78 1.3.4.32.9.48 1.4.47.41.01.82-.06 1.2-.21.3-.14.54-.37.7-.66h2.11a3.49 3.49 0 01-1.48 2.05 4.44 4.44 0 01-2.47.7 4.56 4.56 0 01-2.3-.56 3.96 3.96 0 01-1.55-1.58 4.73 4.73 0 01-.55-2.28 4.63 4.63 0 01.55-2.28 4.05 4.05 0 011.56-1.58 4.41 4.41 0 012.23-.56 4.07 4.07 0 013.7 2.17c.38.69.57 1.46.56 2.25 0 .26-.01.51-.03.77zm-5.65-2.84a2.28 2.28 0 00-.78 1.25h4.3a1.91 1.91 0 00-.69-1.23 2.14 2.14 0 00-1.41-.49 2.19 2.19 0 00-1.42.47zm6.51 1.48a3.79 3.79 0 011.05-2.78c.7-.7 1.68-1.05 2.92-1.05s2.2.35 2.9 1.06a3.8 3.8 0 011.05 2.8v4.8H137v-4.65a2.34 2.34 0 00-.4-1.48 1.73 1.73 0 00-1.26-.53 1.74 1.74 0 00-1.26.53 2.33 2.33 0 00-.42 1.49v4.64h-2.28l-.02-4.83zm15.36-7.48H149v12.3h-2.07l-.16-1.3c-.25.46-.63.84-1.1 1.1-.51.27-1.1.4-1.68.4a3.72 3.72 0 01-1.89-.52 3.77 3.77 0 01-1.44-1.52 4.95 4.95 0 01-.55-2.4 4.9 4.9 0 01.55-2.38 3.8 3.8 0 011.44-1.52 3.74 3.74 0 011.9-.51 3.54 3.54 0 011.63.36c.46.22.84.58 1.1 1.02v-5.04zm-.63 9.86a2.43 2.43 0 00.63-1.8c0-.77-.2-1.36-.64-1.77a2.18 2.18 0 00-3.09.02 2.44 2.44 0 00-.63 1.76 2.46 2.46 0 00.63 1.78 2.12 2.12 0 001.59.65 2.06 2.06 0 001.51-.64zm10.8-5.68a3.92 3.92 0 011.6 1.55c.4.72.6 1.53.58 2.35v4.22h-2.02l-.15-1.27a2.86 2.86 0 01-1.12 1.09c-.5.26-1.06.39-1.62.38a3.89 3.89 0 01-2.05-.56 3.96 3.96 0 01-1.47-1.57 4.82 4.82 0 01-.54-2.31 4.39 4.39 0 01.59-2.26 4.22 4.22 0 011.6-1.58 4.6 4.6 0 012.3-.57 4.81 4.81 0 012.3.53zm-.73 5.68c.44-.42.66-1.02.66-1.8a2.48 2.48 0 00-.63-1.76 2.2 2.2 0 00-3.19 0 2.74 2.74 0 000 3.51 2.09 2.09 0 001.6.68 2.17 2.17 0 001.56-.63zm4.05-2.56a3.77 3.77 0 01.93-2.64c.62-.67 1.5-1 2.64-1 .38-.01.77.03 1.14.12v2.05l-.61-.01c-.63 0-1.09.14-1.37.43a1.79 1.79 0 00-.44 1.32v4.74h-2.28l-.01-5z"
                    />
                    <path
                        className="logo-text-proton"
                        d="M48.68 12.15H43v12.32h2.25V21.4a1.13 1.13 0 011.13-1.12h2.3a4.05 4.05 0 004.06-4.05 4.05 4.05 0 00-4.06-4.08zm1.78 4.06a1.92 1.92 0 01-1.93 1.91h-3.3v-3.85h3.3a1.92 1.92 0 011.92 1.92v.02zm2.63 8.26v-4.89c0-1.99 1.17-3.58 3.5-3.58.37 0 .74.04 1.1.13v2l-.6-.01c-1.23 0-1.77.56-1.77 1.71v4.64H53.1zm5.27-4.15A4.26 4.26 0 0162.8 16c2.58 0 4.43 1.87 4.43 4.32s-1.85 4.34-4.43 4.34a4.27 4.27 0 01-4.42-4.34zm6.65 0c0-1.39-.93-2.38-2.22-2.38-1.28 0-2.22 1-2.22 2.38 0 1.4.93 2.39 2.22 2.39 1.3 0 2.22-.97 2.22-2.39zm8.7-2.36h-2.42v3.08c0 1.08.39 1.58 1.5 1.58.1 0 .37 0 .7-.02v1.81a4.85 4.85 0 01-1.3.2c-1.87 0-3.14-1.13-3.14-3.26v-3.39h-1.5v-1.77h.38a1.13 1.13 0 001.12-1.13v-1.68h2.24v2.8h2.42v1.78zm.67 2.36A4.26 4.26 0 0178.8 16c2.58 0 4.43 1.87 4.43 4.32s-1.85 4.34-4.43 4.34a4.27 4.27 0 01-4.42-4.34zm6.65 0c0-1.39-.94-2.38-2.23-2.38s-2.22 1-2.22 2.38c0 1.4.94 2.39 2.22 2.39 1.29 0 2.23-.97 2.23-2.39zm3.36 4.15v-4.71c0-2.19 1.4-3.76 3.88-3.76 2.5 0 3.87 1.57 3.87 3.76v4.7H89.9v-4.52c0-1.22-.54-1.98-1.64-1.98-1.1 0-1.63.76-1.63 1.98v4.53h-2.25z"
                    />
                </g>
            )}
            {(variant === 'with-wordmark' || variant === 'standalone') && (
                <g>
                    <path
                        className="logo-mark-background"
                        d="M1 9a8 8 0 018-8h18a8 8 0 018 8v18a8 8 0 01-8 8H9a8 8 0 01-8-8V9z"
                    />
                    <path
                        className="logo-mark-border"
                        d="M9 .5A8.5 8.5 0 00.5 9v18A8.5 8.5 0 009 35.5h18a8.5 8.5 0 008.5-8.5V9A8.5 8.5 0 0027 .5H9z"
                    />
                </g>
            )}
            <g>
                <path
                    fill={`url(#${uid}-a)`}
                    d="M9.5 9.13a2.22 2.22 0 00-2.22 2.22v13.3c0 1.23 1 2.22 2.22 2.22h11.33v-5.42a2.46 2.46 0 012.47-2.47h5.42v-7.63a2.22 2.22 0 00-2.22-2.22h-17z"
                />
                <path
                    fill={`url(#${uid}-b)`}
                    d="M9.5 9.13a2.22 2.22 0 00-2.22 2.22v13.3c0 1.23 1 2.22 2.22 2.22h11.33v-5.42a2.46 2.46 0 012.47-2.47h5.42v-7.63a2.22 2.22 0 00-2.22-2.22h-17z"
                />
                <path
                    fill="#BFD8FF"
                    d="M21.45 19.82a2.45 2.45 0 00-.62 1.63v5.42h-3.82v-1.03c0-.53.2-1.04.53-1.44l3.9-4.58z"
                />
                <path
                    fill={`url(#${uid}-c)`}
                    fillRule="evenodd"
                    d="M24.16 9.13H9.5a2.22 2.22 0 00-2.22 2.22v.43h15.15c.96 0 1.73.77 1.73 1.72V19h4.56v-7.64a2.22 2.22 0 00-2.22-2.22h-2.34z"
                    clipRule="evenodd"
                />
                <path
                    fill="var(--logo-icon-text-color)"
                    d="M22.99 24.05h.78a.6.6 0 00.6.46c.36 0 .6-.2.6-.48s-.25-.44-.73-.44h-.3v-.64h.26c.46 0 .65-.17.65-.43 0-.25-.2-.43-.49-.43a.49.49 0 00-.51.45h-.75c.03-.45.38-1.1 1.26-1.1.71 0 1.2.41 1.2.98a.86.86 0 01-.6.82v.01a.86.86 0 01.71.88c0 .61-.56 1.02-1.3 1.02-.77 0-1.32-.44-1.38-1.1zm4.04-2.54h.57v3.59h-.73v-2.76l-.7.48v-.72l.86-.6z"
                />
            </g>
            <defs>
                <linearGradient id={`${uid}-a`} x1="18" x2="19.46" y1="2.04" y2="22.78" gradientUnits="userSpaceOnUse">
                    <stop offset=".99" stopColor="#6D4AFF" />
                </linearGradient>
                <linearGradient
                    id={`${uid}-c`}
                    x1="28.72"
                    x2="15.32"
                    y1="18.77"
                    y2=".29"
                    gradientUnits="userSpaceOnUse"
                >
                    <stop stopColor="#C8E8FF" />
                    <stop offset=".31" stopColor="#BDAEFF" />
                    <stop offset="1" stopColor="#6D4AFF" />
                </linearGradient>
                <radialGradient
                    id={`${uid}-b`}
                    cx="0"
                    cy="0"
                    r="1"
                    gradientTransform="rotate(110.42 10.91 7.64) scale(30.6278 40.8135)"
                    gradientUnits="userSpaceOnUse"
                >
                    <stop offset=".56" stopColor="#54B7FF" stopOpacity="0" />
                    <stop offset=".99" stopColor="#54B7FF" />
                </radialGradient>
            </defs>
            {hasTitle && <title id={`${uid}-title`}>{appName}</title>}
        </svg>
    );
};

export default CalendarLogo;
