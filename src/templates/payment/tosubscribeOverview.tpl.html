<div class="tosubscribeOverview-container">

    <header class="tosubscribeOverview-head">
        <h2 class="tosubscribeOverview-title-plan" translate-context="Title" translate>Plan</h2>
        <h2 class="tosubscribeOverview-title-price" translate-context="Title" translate>Price</h2>
    </header>

    <ul class="tosubscribeOverview-list">
        <li
            class="tosubscribeOverview-item"
            ng-repeat="plan in ctrl.plans | filter: { Type: 1 }"
            data-cycle="{{ ::plan.Cycle }}"
            data-plan="{{ ::plan.Name }}">

            <header class="tosubscribeOverview-item-header">
                <h3 class="tosubscribeOverview-item-title">{{ ::plan.Title }}</h3>
                <span
                    class="tosubscribeOverview-discount"
                    pt-tooltip-translate="1-year plan, 20% off"
                    pt-tooltip-translate-context="Tooltip"
                    data-discount="20">-20%</span>
                <span
                    class="tosubscribeOverview-discount"
                    pt-tooltip-translate="2-year plan, 33% off"
                    pt-tooltip-translate-context="Tooltip"
                    data-discount="33">-33%</span>
                <strong class="tosubscribeOverview-price-monthly">{{ plan.Amount / 100 | currency: plan.Currency }}</strong>
                <strong class="tosubscribeOverview-price-yearly">{{ plan.Amount / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}/mo</strong>
            </header>

            <ul class="tosubscribeOverview-list-about">
                <li class="tosubscribeOverview-about-space" ng-if="plan.Name.indexOf('vpn') === -1">
                    {{ ::ctrl.count('MaxSpace') | humanSize }}
                    <span class="tosubscribeOverview-about-type" translate-context="subscription label" translate>Storage</span>
                    <strong ng-if="ctrl.price('space')" class="tosubscribeOverview-price">{{ ::ctrl.price('space') / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency  }}
                        <span
                            class="tosubscribeOverview-price-scope"
                            translate-context="Price per month"
                            translate>/mo</span>
                    </strong>
                </li>
                <li class="tosubscribeOverview-about-domains" ng-if="plan.Name.indexOf('vpn') === -1">
                    {{ ::ctrl.count('MaxDomains') }}
                    <span class="tosubscribeOverview-about-type" translate translate-n="ctrl.count('MaxDomains')" translate-plural="Custom domains" translate-context="subscription label">Custom domain</span>
                    <strong ng-if="ctrl.price('domain')" class="tosubscribeOverview-price">{{ ::ctrl.price('domain') / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}
                        <span
                            class="tosubscribeOverview-price-scope"
                            translate-context="Price per month"
                            translate>/mo</span>
                    </strong>
                </li>

                <li class="tosubscribeOverview-about-members" ng-if="plan.Name.indexOf('vpn') === -1">
                    {{ ::ctrl.count('MaxMembers') }}
                    <span class="tosubscribeOverview-about-type" translate translate-n="ctrl.count('MaxMembers')" translate-plural="Users" translate-context="subscription label">User</span>
                    <strong ng-if="ctrl.price('member')" class="tosubscribeOverview-price">{{ ::ctrl.price('member') / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}
                        <span
                            class="tosubscribeOverview-price-scope"
                            translate-context="Price per month"
                            translate>/mo</span>
                    </strong>
                </li>

                <li class="tosubscribeOverview-about-addresses" ng-if="plan.Name.indexOf('vpn') === -1">
                    {{ ::ctrl.count('MaxAddresses') }}
                    <span class="tosubscribeOverview-about-type" translate translate translate-n="ctrl.count('MaxAddresses')" translate-plural="Addresses" translate-context="subscription label">Address</span>
                    <strong ng-if="ctrl.price('address')" class="tosubscribeOverview-price">{{ ::ctrl.price('address') / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}
                        <span
                            class="tosubscribeOverview-price-scope"
                            translate-context="Price per month"
                            translate>/mo</span>
                    </strong>
                </li>
                <li class="tosubscribeOverview-about-vpn" ng-if="plan.Name.indexOf('vpn') > -1">
                    {{ ::ctrl.count('MaxVPN') }}
                    <span class="tosubscribeOverview-about-type" translate-context="subscription label" translate>VPN Connections</span>
                    <strong ng-if="ctrl.price('vpn')" class="tosubscribeOverview-price">{{ ::ctrl.price('vpn') / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}
                        <span
                            class="tosubscribeOverview-price-scope"
                            translate-context="Price per month"
                            translate>/mo</span>
                    </strong>
                </li>
            </ul>
        </li>

        <li class="tosubscribeOverview-item tosubscribeOverview-total-monthly" ng-if="ctrl.valid.Cycle !== 1">
            <strong translate-context="Title" translate>Cost per month</strong>
            <strong>{{ ctrl.valid.Amount / 100 / ctrl.valid.Cycle | fixed:2 | currency: ctrl.valid.Currency }}</strong>
        </li>

        <li class="tosubscribeOverview-item tosubscribeOverview-total-yearly">
            <strong ng-show="ctrl.valid.Cycle === 1" translate-context="Title" translate>Total (monthly billing)</strong>
            <strong ng-show="ctrl.valid.Cycle === 12" translate-context="Title" translate>Total (annual billing)</strong>
            <strong ng-show="ctrl.valid.Cycle === 24" translate-context="Title" translate>Total (2-year billing)</strong>
            <strong>{{ ctrl.valid.Amount / 100 | currency: ctrl.valid.Currency }}</strong>
        </li>

        <li class="tosubscribeOverview-item" ng-if="ctrl.valid.CouponDiscount < 0">
            <span translate translate-context="Title">Coupon</span>
            <span
                class="tosubscribeOverview-discount"
                pt-tooltip="{{ ctrl.valid.Coupon.Description }}">-{{ -ctrl.valid.CouponDiscount / ctrl.valid.Amount | percentage }}%</span>
            <strong class="text-green">{{ ctrl.valid.CouponDiscount / 100 | currency: ctrl.valid.Currency }}</strong>
        </li>

        <li class="tosubscribeOverview-item" ng-if="ctrl.valid.Proration !== 0">
            <div class="desc">
                <span translate-context="Title" translate>Proration</span> <a class="text-purple" href="https://protonmail.com/support/knowledge-base/credit-proration/" target="_blank" translate-context="Link" translate>(What is this?)</a>
            </div>
            <strong class="text-green">{{ ctrl.valid.Proration / 100 | currency: ctrl.valid.Currency }}</strong>
        </li>

        <li class="tosubscribeOverview-item" ng-if="ctrl.valid.Gift < 0">
            <span class="desc" translate translate-context="Title">Gift code</span>
            <strong>{{ ctrl.valid.Gift / 100 | currency: ctrl.valid.Currency }}</strong>
        </li>

        <li class="tosubscribeOverview-item" ng-if="ctrl.valid.Credit < 0">
            <span class="desc" translate translate-context="Title">Credit</span>
            <strong class="text-green">{{ ctrl.valid.Credit / 100 | currency: ctrl.valid.Currency }}</strong>
        </li>

        <li class="tosubscribeOverview-item">
            <strong translate translate-context="Title">Amount due</strong>
            <strong>{{ ctrl.valid.AmountDue / 100 | currency: ctrl.valid.Currency }}</strong>
        </li>

    </ul>
</div>
