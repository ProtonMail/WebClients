import { ArgTypes, Canvas, Meta, PRIMARY_STORY, Primary, Story } from '@storybook/addon-docs';

import { SelectTwo } from '@proton/components';
import { SearchableSelect } from '@proton/components';

# Select

The Select component allows a user to select from a list of options.

In line with trying to emulate the native os `<select />`s as well as possible, this Select component implements keyboard navigation in line with the behaviour of OSX' native `<select />` implementation, including keyboard searchability which resets a given search-input after a timeout (configurable through the `clearSearchAfter` prop).

### Basic Select

The most basic usage of the Select component comes in the form of using just strings as both the value of the option as well as the contents of the option.

<Canvas withSource="open">
    <Story id="components-select--basic" />
</Canvas>

### Select multiple options

We can allow the user to select multiple options by specifying the `mode` prop and ensuring the `value` prop is a list.

Dropdown items become togglable & selecting an item will not auto-close the dropdown.

<Canvas>
    <Story id="components-select--multiple" />
</Canvas>

### Rich option content

Any rich option content is supported through React's `children` api as the following example demonstrates by using icons inside the children of the `<Option />` component's children prop.

<Canvas>
    <Story id="components-select--with-rich-option-content" />
</Canvas>

### Complex values

As opposed to native selects, this Select component allows for `<Option />` values to be of complex types (e.g. `Object`).

** Important note **

Under the hood, `Select` uses reference equality comparisons to determine which options are selected. When using complex values, make sure the `value` prop actually references one of the selected `<Option />` values. _In practice, make sure your options are re-cycled through out render cycles by either wrapping them in a `useRef` or `useMemo` hook._

<Canvas>
    <Story id="components-select--with-complex-values" />
</Canvas>

### InputField

The Select component can be uses as an [input for InputField](/docs/components-inputfield--basic#custom-elements).

<Canvas>
    <Story id="components-select--as-input-field" />
</Canvas>

### Searchable Select

This component will add a search input field inside of the select dropdown in order to filter out the options data. You can pass a custom search function if necessary.

<Canvas>
    <Story id="components-select--search" />
</Canvas>

### Searchable & Multiple options

Allow searching while selecting multiple results. The selected options are preserved through out the search. Selecting an item will not auto-close the dropdown : each item can be toggled.

<Canvas>
    <Story id="components-select--multi-search" />
</Canvas>

### Custom display value rendering

The `renderSelected` prop allows customisation of the rendered display value.

<Canvas>
    <Story id="components-select--render-selected" />
</Canvas>

### Accessibility

This component supporting complex values, together with the fact that option contents can be rich in nature causes an uncertainty about which human-readable part of either `value` or `children` can be used for accessibility labels.

To make up for this, an API anomaly is introduced for this component making the `title` prop of the option required, however, in the case that you're using Select in it's most basic form (string `value` & string `children`) you're only required to pass `title` & `value`, leaving `children` out (as can be seen in the [Basic Select](#basic-select)) example.

<Primary />

<ArgTypes story={PRIMARY_STORY} />
