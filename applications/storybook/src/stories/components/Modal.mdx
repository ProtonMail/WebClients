import { Canvas, Story, ArgsTable, Primary, PRIMARY_STORY } from '@storybook/addon-docs';
import { Alert } from '@proton/components'

# Modal

Modals are made of multiple composite components, namely:

- `ModalTwo`
- `ModalTwoHeader`
- `ModalTwoContent`
- `ModalTwoFooter`

<Alert>
    Please note that the old <code>Modal</code> component is deprecated and should be replaced with <code>ModalTwo</code>. This document is about the new <code>ModalTwo</code> component.
</Alert>

## How to use

```javascript
import { ModalTwo, ModalTwoHeader, ModalTwoContent, ModalTwoFooter } from '@proton/components';
```
<Canvas withSource="open">
    <Story id="components-modal--example" />
</Canvas>

## Variants

### Size

Modals come in four different sizes. `small`, `medium`, `large` & `full`.

<Canvas>
    <Story id="components-modal--primary" />
</Canvas>

### Using `useModalState`

For use-cases where one would prefer to lose the local state (e.g. form state) of a given modal after it closes/exits, you can use the `useModalState` hook.

Internally, the react-node is un- & re-mounted by incrementing and passing of a `key` after each `onExit` call.

<Canvas>
    <Story id="components-modal--using-use-modal-state" />
</Canvas>

### Title in Header

The `ModalHeader` comes with some built-ins. It will always display a close button, and optionally a back button, a title and a subline.

There is another optional built-in called `actions` covered in the next story.

<Canvas>
    <Story id="components-modal--header" />
</Canvas>

### Actions in Header

You can add up to two icon button to the header of a modal.

<Canvas>
    <Story id="components-modal--header-actions" />
</Canvas>

### Scrollable content

When a Modal's content is so large that it exceeds the Modal's allowed maximum height (depending of course also on its width) it will become scrollable. This is easy to see in this example as there is a lot of content, however this can also be seen if you reduce the viewport height by a lot.

<Canvas>
    <Story id="components-modal--a-lot-of-content" />
</Canvas>

### Full screen on mobile

Modals can cover the entire screen on mobile widths by using the `fullscreenOnMobile` prop.

<Canvas>
    <Story id="components-modal--fullscreen-on-mobile" />
</Canvas>

### Using an html form tag as the root element

You can exchange the root element used for the `Modal` with an html `form` tag by leveraging the `as` prop.

<Canvas>
    <Story id="components-modal--with-form-root" />
</Canvas>

### AlertModal

The `AlertModal` is a special variant of the `Modal` component. It is not composite, meant not to be too flexible and comes with a comparatively rudimentary props api, allowing only the passing of some templating props.

<Canvas>
    <Story id="components-modal--alert" />
</Canvas>

<Canvas>
    <Story id="components-modal--alert-with-only-one-button" />
</Canvas>

### BasicModal

Similarly to `AlertModal`, `BasicModal` is a special variant of the `Modal` component. It is not composite, meant not to be too flexible and comes with a comparatively rudimentary props api, allowing only the passing of some templating props.

It also uses `useModalState` internally.

<Canvas>
    <Story id="components-modal--basic" />
</Canvas>

The props for `ModalTwoContent` & `ModalTwoFooter` aren't listed here because they don't possess any proprietary props, only the native ones of their respective underlying root dom-node.

<ArgsTable story={PRIMARY_STORY} />
